# Django settings
# Generate a strong secret in prod. DO NOT commit real secrets.
SECRET_KEY=change-me-please
DEBUG=1
ALLOWED_HOSTS=127.0.0.1,localhost

# Database
# Local development: defaults to SQLite. Leave DATABASE_URL unset locally.
# If you want to use a local Postgres in dev, set DEV_DATABASE_URL below.
# Staging/Prod should set DATABASE_URL (e.g., Supabase connection string)
# DATABASE_URL=postgres://USER:PASSWORD@HOST:5432/DBNAME
DEV_DATABASE_URL=

# CORS (frontend origins)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
CORS_ALLOW_ALL_ORIGINS=0
CORS_ALLOWED_ORIGIN_REGEXES=
CORS_ALLOW_CREDENTIALS=1
CSRF_TRUSTED_ORIGINS=

# Redis (channels, cache, celery)
REDIS_URL=redis://localhost:6379/0

# Email
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USE_TLS=1
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

# Sentry (optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.0
SENTRY_PROFILES_SAMPLE_RATE=0.0

# Static & Media
MEDIA_STORAGE_BACKEND=local
For Supabase storage (optional): set backend to supabase and configure bucket
MEDIA_STORAGE_BACKEND=supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_BUCKET=public-media
SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Security & HTTPS (prod)
# Enforce HTTPS redirects and HSTS in production. Tune these per your proxy/load balancer.
SECURE_SSL_REDIRECT=1
# Exempt health checks from HTTPS redirect (regexes). Example: ^health/?$
SECURE_REDIRECT_EXEMPT=^health/?$
# HSTS: 1 year recommended when confident; include subdomains and preload where appropriate.
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=1
SECURE_HSTS_PRELOAD=1
# Honor X-Forwarded headers from reverse proxy
USE_X_FORWARDED_HOST=1
USE_X_FORWARDED_PORT=1
# Additional security headers
SECURE_CONTENT_TYPE_NOSNIFF=1
SECURE_REFERRER_POLICY=same-origin
# Default is DENY in prod. Override ONLY if you control the embedding site.
X_FRAME_OPTIONS=DENY
SECURE_CROSS_ORIGIN_OPENER_POLICY=same-origin
# Cookies
SESSION_COOKIE_HTTPONLY=1
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_HTTPONLY=1
CSRF_COOKIE_SAMESITE=Lax

# Observability
SLOW_REQUEST_THRESHOLD_MS=1000
SLOW_DB_QUERY_MS=200

# Email (prod defaults to SendGrid via SMTP)
DEFAULT_FROM_EMAIL=noreply@example.com

# Dev email (Mailgun SMTP sandbox - optional)
DEV_EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
DEV_EMAIL_HOST=smtp.mailgun.org
DEV_EMAIL_PORT=587
DEV_EMAIL_USE_TLS=1
DEV_EMAIL_HOST_USER=postmaster@sandboxXXXX.mailgun.org
DEV_EMAIL_HOST_PASSWORD=your-mailgun-smtp-password

# Cache and Celery (Redis)
CACHE_REDIS_URL=redis://localhost:6379/1
CACHE_TTL=300
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_ALWAYS_EAGER=0
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_PREFETCH_MULTIPLIER=1
